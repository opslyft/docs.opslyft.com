"use strict";(self.webpackChunkdocs_opslyft_com=self.webpackChunkdocs_opslyft_com||[]).push([[888],{4137:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var o=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,s=function(e,t){if(null==e)return{};var n,o,s={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var i=o.createContext({}),c=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(i.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=s,f=u["".concat(i,".").concat(h)]||u[h]||m[h]||r;return n?o.createElement(f,a(a({ref:t},p),{},{components:n})):o.createElement(f,a({ref:t},p))}));function f(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,a=new Array(r);a[0]=h;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[u]="string"==typeof e?e:s,a[1]=l;for(var c=2;c<r;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2612:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var o=n(7462),s=(n(7294),n(4137));const r={sidebar_position:4},a="Kubernetes",l={unversionedId:"integrations/kubernetes",id:"integrations/kubernetes",title:"Kubernetes",description:"Integrating OpenCost with your Kubernetes cluster is a straightforward process that involves two key steps: setting up Prometheus and installing OpenCost itself. Prometheus is essential for collecting metrics that OpenCost relies on for cost analysis. In the first step, we'll guide you through the installation of Prometheus using a Helm chart. Next, in Step 2, you'll install OpenCost by applying a YAML configuration specific to your Kubernetes cluster. After completing these steps, you can test the installation by checking for the external IP address and accessing OpenCost for cost allocation insights.",source:"@site/docs/integrations/kubernetes.md",sourceDirName:"integrations",slug:"/integrations/kubernetes",permalink:"/docs.opslyft.com/integrations/kubernetes",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"GCP Services",permalink:"/docs.opslyft.com/integrations/gcp/gcp-services"},next:{title:"Snowflake",permalink:"/docs.opslyft.com/integrations/snowflake"}},i={},c=[{value:"Follow the steps below to install OpenCost",id:"follow-the-steps-below-to-install-opencost",level:2},{value:"Step 1: Prometheus",id:"step-1-prometheus",level:3},{value:"Step 2: Installing OpenCost",id:"step-2-installing-opencost",level:3},{value:"Testing",id:"testing",level:2}],p={toc:c},u="wrapper";function m(e){let{components:t,...n}=e;return(0,s.kt)(u,(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"kubernetes"},"Kubernetes"),(0,s.kt)("p",null,"Integrating OpenCost with your Kubernetes cluster is a straightforward process that involves two key steps: setting up Prometheus and installing OpenCost itself. Prometheus is essential for collecting metrics that OpenCost relies on for cost analysis. In the first step, we'll guide you through the installation of Prometheus using a Helm chart. Next, in Step 2, you'll install OpenCost by applying a YAML configuration specific to your Kubernetes cluster. After completing these steps, you can test the installation by checking for the external IP address and accessing OpenCost for cost allocation insights."),(0,s.kt)("h2",{id:"follow-the-steps-below-to-install-opencost"},"Follow the steps below to install OpenCost"),(0,s.kt)("h3",{id:"step-1-prometheus"},"Step 1: Prometheus"),(0,s.kt)("p",null,"Opencost relies on metrics scraped by Prometheus. For express installation of Prometheus use the following command:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"helm install opskube-prometheus --repo https://prometheus-community.github.io/helm-charts prometheus \\\n  --namespace prometheus --create-namespace \\\n  --set pushgateway.enabled=false \\\n  --set alertmanager.enabled=false \\\n  -f https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/prometheus/extraScrapeConfigs.yaml\n")),(0,s.kt)("p",null,"This Prometheus installation is based on Prom community helm chart."),(0,s.kt)("h3",{id:"step-2-installing-opencost"},"Step 2: Installing OpenCost"),(0,s.kt)("p",null,"To install OpenCost on your cluster, you need to replace ",(0,s.kt)("inlineCode",{parentName:"p"},"<your-cluster-name>")," with your actual Kubernetes cluster name in the command below before running it:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"curl -s https://raw.githubusercontent.com/opslyft/opslyft-kubernetes/main/opencost.yaml | sed 's/cluster-one/<your-cluster-name>/g' | kubectl apply --namespace opencost -f -\n")),(0,s.kt)("p",null,"This command fetches the OpenCost YAML configuration, replaces the CLUSTER_ID value with your cluster name, and applies the configuration to your Kubernetes cluster.\nMake sure to replace with the name of your Kubernetes cluster."),(0,s.kt)("h2",{id:"testing"},"Testing"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get svc -n opencost\n")),(0,s.kt)("p",null,"This command will list the service which is deployed in namespace ",(0,s.kt)("strong",{parentName:"p"},'"opencost"'),"."),(0,s.kt)("p",null,"Copy the ",(0,s.kt)("inlineCode",{parentName:"p"},"EXTERNAL-IP")," from the response of above command and hit ",(0,s.kt)("inlineCode",{parentName:"p"},"http://EXTERNAL-IP:9003/allocation/compute?window=60m")),(0,s.kt)("p",null,"For further inquiries, detailed assistance, or to address any concerns, please do not hesitate to contact our dedicated support team. Please reach out to us at ",(0,s.kt)("a",{parentName:"p",href:"mailto:contact@opslyft.com"},"contact@opslyft.com")))}m.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkdocs_opslyft_com=self.webpackChunkdocs_opslyft_com||[]).push([[704],{4137:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=o.createContext({}),l=function(e){var t=o.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,c=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),u=l(r),d=n,m=u["".concat(c,".").concat(d)]||u[d]||g[d]||i;return r?o.createElement(m,s(s({ref:t},p),{},{components:r})):o.createElement(m,s({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,s=new Array(i);s[0]=d;var a={};for(var c in t)hasOwnProperty.call(t,c)&&(a[c]=t[c]);a.originalType=e,a[u]="string"==typeof e?e:n,s[1]=a;for(var l=2;l<i;l++)s[l]=r[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},4659:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var o=r(7462),n=(r(7294),r(4137));const i={sidebar_position:1,pagination_prev:"integrations/azure"},s="Setup GCP",a={unversionedId:"integrations/gcp/setup-gcp",id:"integrations/gcp/setup-gcp",title:"Setup GCP",description:"This guide covers the integration process, which involves two key steps: Billing Integration and Project Integration. In Billing Integration, OpsLyft requires access to your GCP Billing Report to perform billing analysis. For Project Integration, OpsLyft creates a custom IAM role and delegates access to our service account with specific permissions to provide insights into your GCP project's resources. To ensure a smooth integration, we provide a script that facilitates essential GCP service enablement and IAM role creation. These steps ensure your GCP project is correctly configured for OpsLyft integration, allowing you to harness its advanced capabilities effectively.",source:"@site/docs/integrations/gcp/setup-gcp.md",sourceDirName:"integrations/gcp",slug:"/integrations/gcp/setup-gcp",permalink:"/docs.opslyft.com/integrations/gcp/setup-gcp",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,pagination_prev:"integrations/azure"},sidebar:"tutorialSidebar",previous:{title:"Azure",permalink:"/docs.opslyft.com/integrations/azure"},next:{title:"GCP Permissions",permalink:"/docs.opslyft.com/integrations/gcp/gcp-permissions"}},c={},l=[{value:"Billing Integration",id:"billing-integration",level:2},{value:"Project Integration",id:"project-integration",level:2},{value:"Integration Steps",id:"integration-steps",level:2}],p={toc:l},u="wrapper";function g(e){let{components:t,...i}=e;return(0,n.kt)(u,(0,o.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"setup-gcp"},"Setup GCP"),(0,n.kt)("p",null,"This guide covers the integration process, which involves two key steps: Billing Integration and Project Integration. In Billing Integration, OpsLyft requires access to your GCP Billing Report to perform billing analysis. For Project Integration, OpsLyft creates a custom IAM role and delegates access to our service account with specific permissions to provide insights into your GCP project's resources. To ensure a smooth integration, we provide a script that facilitates essential GCP service enablement and IAM role creation. These steps ensure your GCP project is correctly configured for OpsLyft integration, allowing you to harness its advanced capabilities effectively."),(0,n.kt)("h2",{id:"billing-integration"},"Billing Integration"),(0,n.kt)("p",null,"To begin the integration, OpsLyft requires access to your GCP Cost and Usage Reports (CUR). These reports reside in BigQuery, and we need to share the BQ dataset with our service account. This permission allows OpsLyft's service principal to extract the data necessary for billing analysis. Once granted, the billing integration process is completed."),(0,n.kt)("h2",{id:"project-integration"},"Project Integration"),(0,n.kt)("p",null,"OpsLyft's integration goes beyond billing; we create an IAM role with specific permissions to provide insights into your GCP project's resources. This involves configuring permissions and services within your GCP project to enable specific APIs. OpsLyft creates a unique IAM role with precise permissions that match its specific requirements. This role is then assigned to a service account associated with your project, facilitating a secure and efficient integration process."),(0,n.kt)("admonition",{title:"Important Note",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Please note that OpsLyft can only display services within your project that you have enabled.")),(0,n.kt)("h2",{id:"integration-steps"},"Integration Steps"),(0,n.kt)("p",null,"To facilitate the integration process, we provide a script for configuring your GCP project. Follow these steps to configure your project for OpsLyft integration:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"GCP Steps",src:r(3445).Z,width:"866",height:"601"})),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Download the Configuration Script:")," Execute the following command to download the necessary configuration script.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"wget -nc https://opslyft-gcp-script.s3.amazonaws.com/opslyft-gcp-common.yaml\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Enable Essential GCP Services:")," Enable critical GCP services by running the following commands:.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"gcloud services enable cloudresourcemanager.googleapis.com --project={project_id}\ngcloud services enable cloudasset.googleapis.com --project={project_id}\ngcloud services enable iam.googleapis.com --project={project_id}\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Create Custom IAM Role:")," Create a custom IAM role designed to meet OpsLyft's requirements. Execute this command to create the role using the provided configuration file:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"gcloud iam roles create {role_name} --project={project_id} --file-opslyft-gcp-common.yaml\n")),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Assign Role to Service Account:")," Assign the custom IAM role to our service account within your project by running this command:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'gcloud projects add-iam-policy-binding {project_id} --member serviceAccount:opslyft@rock-bonus-299515.iam.gserviceaccount.com --role "projects/{project_id}/roles/{role_name}"\n')),(0,n.kt)("p",null,"These steps ensure that your GCP project is configured correctly with the necessary Service account, IAM role, and permissions for OpsLyft integration."),(0,n.kt)("p",null,"For further inquiries, detailed assistance, or to address any concerns, please do not hesitate to contact our dedicated support team. Please reach out to us at ",(0,n.kt)("a",{parentName:"p",href:"mailto:contact@opslyft.com"},"contact@opslyft.com")))}g.isMDXComponent=!0},3445:(e,t,r)=>{r.d(t,{Z:()=>o});const o=r.p+"assets/images/gcp-step-8a13d47fa80e63d139f18ee11e0c1440.png"}}]);